webpackJsonp([0],[function(a,b,c){"use strict";var d=c(1);c(4),c(8);new d.Controller},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0}),b.Controller=void 0;var e=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(2),g=c(3),h=b.Controller=function(){function a(){d(this,a),this._http=new f.HttpService,this._view=new g.View,this.current_hash="",this._maxRangeValue=4,this._minRangeValue=1,this._maxSize=30,this._init()}return e(a,[{key:"_init",value:function(){var a=this;this.isAdvancedUpload()||document.querySelector("body").classList.add("no-drag"),this._resetLabel(),this.addEvents(),this.getScssMarioPixelsData().then(function(b){a._view.addTextIntoScssTab(b),a.addScssMarioToDOM(),a.getMarioSassCodeData().then(function(b){return a._view.addSassCode(b)}).catch(function(a){return console.log(a)})}),this.getMarioSassCodeData().then(function(b){return a._view.addSassCode(b)}).catch(function(a){return console.log(a)})}},{key:"addEvents",value:function(){var a=this;this._view.btnSubmit.addEventListener("click",function(b){return a.onSubmit.call(a,b)}),this._view._btnHtml.addEventListener("click",function(b){return a._view.showHtml.call(a._view,b)}),this._view._btnScss.addEventListener("click",function(b){return a._view.showScss.call(a._view,b)}),this._view._btnCss.addEventListener("click",function(b){return a._view.showCss.call(a._view,b)}),this._view._fileUploadContainer.addEventListener("dragover",this._view.containerActive),this._view._fileUploadContainer.addEventListener("dragenter",this._view.containerActive),this._view._fileUploadContainer.addEventListener("dragleave",this._view.containerRemoveActive),this._view._fileUploadContainer.addEventListener("dragend",this._view.containerRemoveActive),this._view._fileUploadContainer.addEventListener("drop",function(b){a.drop.call(a,b)})}},{key:"onSubmit",value:function(a){a.preventDefault(),this._uploadImage(this._inputFile.files[0])}},{key:"drop",value:function(a){a.stopPropagation(),a.preventDefault(),this._view.containerRemoveActive(a),this._uploadImage(a.dataTransfer.files)}},{key:"_uploadImage",value:function(a){var b=this;0<a.length&&(a=a[0]);var c=1024*this._maxSize;if(a){var d=a.size;if(d>c)return this._view.updateLabelText("file size is more than "+c+" bytes. Choose another file."),!1;this._view.updateLabelText("file size is correct - "+d+" bytes. Uploading...")}else return this._view.updateLabelText("choose file, please"),!1;var e=4;this.getDataUrlFromFile(a).then(function(a){return b.getPixelsfromDataUrl(a,e)}).then(function(a){return b.sendPixels(a.pixels,a.w,a.h,b.getPixelSize(e))}).then(function(a){return b.getScssPixelsData(a.data)}).then(function(a){b._view.addTextIntoScssTab(a),b.addScssToDOM(b.current_hash),b.getSassCodeData(b.current_hash).then(function(a){b._view.addSassCode(a),b._resetLabel()}).catch(function(a){return console.log(a)})}).catch(function(a){return console.log(a)})}},{key:"getScssPixelsData",value:function(a){return this.current_hash=a,this._http.get("/uploads/"+a+".scss")}},{key:"getScssMarioPixelsData",value:function(){return this._http.get("/mario-pixel.scss")}},{key:"getSassCodeData",value:function(a){return this._http.get("/sass/"+a)}},{key:"getMarioSassCodeData",value:function(){return this._http.get("/sass/mario")}},{key:"_resetLabel",value:function(){this._view.updateLabelText("Images up to "+this._maxSize+" Kb.")}},{key:"addScssToDOM",value:function(){var a=document.createElement("LINK");a.setAttribute("href","/img-to-css.herokuapp.com/uploads/"+this.current_hash+".scss"),a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(a)}},{key:"addScssMarioToDOM",value:function(){var a=document.createElement("LINK");a.setAttribute("href","/img-to-css.herokuapp.com/mario-pixel.scss"),a.setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(a)}},{key:"getDataUrlFromFile",value:function(a){return new Promise(function(b,c){var d=new FileReader;d.addEventListener("load",function(){b(d.result)},!1),d.addEventListener("error",function(a){c(a.target.error)},!1),a&&d.readAsDataURL(a)})}},{key:"getPixelsfromDataUrl",value:function(a,b){var c=this;return new Promise(function(d,e){var f=document.createElement("canvas"),g=f.getContext("2d"),h=new Image,i=c.getPercentageToReduce(b);h.onload=function(){g.drawImage(h,0,0,h.width*i,h.height*i),d({pixels:c.getPixels(g,0,0,h.width,h.height),w:h.width,h:h.height})},h.onerror=function(a){e(a.target.error)},h.src=a})}},{key:"getPercentageToReduce",value:function(a){return 1/this._maxRangeValue*a}},{key:"getPixelSize",value:function(a){return this._maxRangeValue-a+1}},{key:"getPixels",value:function(a,b,c,d,e){var f=a.getImageData(b,c,d,e);return f.data}},{key:"sendPixels",value:function(a,b,c,d){return this._http.post("/img-to-css.herokuapp.com/image",{pixelsArray:a,w:b,h:c,quantity:d})}},{key:"isAdvancedUpload",value:function(){var a=document.createElement("div");return("draggable"in a||"ondragstart"in a&&"ondrop"in a)&&"FormData"in window&&"FileReader"in window}}]),a}()},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=b.HttpService=function(){function a(){c(this,a)}return d(a,[{key:"get",value:function(a){return new Promise(function(b,c){var d=new XMLHttpRequest;d.open("GET",a),d.onreadystatechange=function(){4==d.readyState&&(200==d.status?b(d.responseText):c(d.responseText))},d.send()})}},{key:"post",value:function(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.open("POST",a,!0),e.setRequestHeader("Content-type","application/json"),e.onreadystatechange=function(){4==e.readyState&&(200==e.status?c(JSON.parse(e.responseText)):d(e.responseText))},console.log(b),e.send(JSON.stringify(b))})}}]),a}()},function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=b.View=function(){function a(){c(this,a),this._inputFile=document.querySelector("input[type=file]"),this._inputTextHelp=document.querySelector(".help-block"),this._btnHtml=document.querySelector(".btn-html"),this._btnScss=document.querySelector(".btn-scss"),this._btnCss=document.querySelector(".btn-css"),this._scssCode=document.querySelector(".scss"),this._htmlCode=document.querySelector(".html"),this._cssCode=document.querySelector(".css"),this.btnSubmit=document.querySelector(".submit"),this._fileUploadContainer=document.querySelector(".form-upload")}return d(a,[{key:"containerActive",value:function(a){a.stopPropagation(),a.preventDefault(),a.currentTarget.classList.add("active")}},{key:"containerRemoveActive",value:function(a){a.stopPropagation(),a.preventDefault(),a.currentTarget.classList.remove("active")}},{key:"hideAllTabs",value:function(){this._htmlCode.classList.remove("active"),this._cssCode.classList.remove("active"),this._scssCode.classList.remove("active"),this._btnHtml.classList.remove("active"),this._btnScss.classList.remove("active"),this._btnCss.classList.remove("active")}},{key:"updateLabelText",value:function(a){this._inputTextHelp.innerText=a}},{key:"addTextIntoScssTab",value:function(a){document.querySelector(".css-text code").innerText="        \n        /*CSS CODE*/\n\n        "+a+"\n\n        /*END CSS CODE*/\n        ",document.querySelector(".html-text code").innerText="\n        <!-- HTML CODE -->\n\n            <div class=\"holder\">\n                <div class=\"image-css\"></div>\n            </div>\n\n        <!-- END HTML CODE -->\n        "}},{key:"addSassCode",value:function(a){document.querySelector(".sass-text code").innerText=JSON.parse(a)}},{key:"showHtml",value:function(a){a.preventDefault(),this.hideAllTabs(),this._htmlCode.classList.add("active"),this._btnHtml.classList.add("active")}},{key:"showScss",value:function(a){a.preventDefault(),this.hideAllTabs(),this._scssCode.classList.add("active"),this._btnScss.classList.add("active")}},{key:"showCss",value:function(a){a.preventDefault(),this.hideAllTabs(),this._cssCode.classList.add("active"),this._btnCss.classList.add("active")}}]),a}()},function(){},function(a){function b(a,b){var d=a[1]||"",e=a[3];if(!e)return d;if(b&&"function"==typeof btoa){var f=c(e),g=e.sources.map(function(a){return"/*# sourceURL="+e.sourceRoot+a+" */"});return[d].concat(g).concat([f]).join("\n")}return[d].join("\n")}function c(a){var b=btoa(unescape(encodeURIComponent(JSON.stringify(a))));return"/*# "+("sourceMappingURL=data:application/json;charset=utf-8;base64,"+b)+" */"}a.exports=function(a){var c=[];return c.toString=function(){return this.map(function(c){var d=b(c,a);return c[2]?"@media "+c[2]+"{"+d+"}":d}).join("")},c.i=function(a,b){"string"==typeof a&&(a=[[null,a,""]]);for(var d,e={},f=0;f<this.length;f++)d=this[f][0],"number"==typeof d&&(e[d]=!0);for(f=0;f<a.length;f++){var g=a[f];"number"==typeof g[0]&&e[g[0]]||(b&&!g[2]?g[2]=b:b&&(g[2]="("+g[2]+") and ("+b+")"),c.push(g))}},c}},function(a,b,c){function d(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=o[d.id];if(e){e.refs++;for(var f=0;f<e.parts.length;f++)e.parts[f](d.parts[f]);for(;f<d.parts.length;f++)e.parts.push(k(d.parts[f],b))}else{for(var g=[],f=0;f<d.parts.length;f++)g.push(k(d.parts[f],b));o[d.id]={id:d.id,refs:1,parts:g}}}}function e(a,b){for(var c=[],d={},e=0;e<a.length;e++){var f=a[e],g=b.base?f[0]+b.base:f[0],h=f[1],i=f[2],j=f[3],k={css:h,media:i,sourceMap:j};d[g]?d[g].parts.push(k):c.push(d[g]={id:g,parts:[k]})}return c}function f(a,b){var c=q(a.insertInto);if(!c)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var d=t[t.length-1];if("top"===a.insertAt)d?d.nextSibling?c.insertBefore(b,d.nextSibling):c.appendChild(b):c.insertBefore(b,c.firstChild),t.push(b);else if("bottom"===a.insertAt)c.appendChild(b);else throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.")}function g(a){if(null===a.parentNode)return!1;a.parentNode.removeChild(a);var b=t.indexOf(a);0<=b&&t.splice(b,1)}function h(a){var b=document.createElement("style");return a.attrs.type="text/css",j(b,a.attrs),f(a,b),b}function i(a){var b=document.createElement("link");return a.attrs.type="text/css",a.attrs.rel="stylesheet",j(b,a.attrs),f(a,b),b}function j(a,b){Object.keys(b).forEach(function(c){a.setAttribute(c,b[c])})}function k(a,b){var c,d,e,f;if(b.transform&&a.css)if(f=b.transform(a.css),f)a.css=f;else return function(){};if(b.singleton){var j=s++;c=r||(r=h(b)),d=l.bind(null,c,j,!1),e=l.bind(null,c,j,!0)}else a.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(c=i(b),d=n.bind(null,c,b),e=function(){g(c),c.href&&URL.revokeObjectURL(c.href)}):(c=h(b),d=m.bind(null,c),e=function(){g(c)});return d(a),function(b){if(b){if(b.css===a.css&&b.media===a.media&&b.sourceMap===a.sourceMap)return;d(a=b)}else e()}}function l(a,b,c,d){var e=c?"":d.css;if(a.styleSheet)a.styleSheet.cssText=v(b,e);else{var f=document.createTextNode(e),g=a.childNodes;g[b]&&a.removeChild(g[b]),g.length?a.insertBefore(f,g[b]):a.appendChild(f)}}function m(a,b){var c=b.css,d=b.media;if(d&&a.setAttribute("media",d),a.styleSheet)a.styleSheet.cssText=c;else{for(;a.firstChild;)a.removeChild(a.firstChild);a.appendChild(document.createTextNode(c))}}function n(a,b,c){var d=c.css,e=c.sourceMap,f=b.convertToAbsoluteUrls===void 0&&e;(b.convertToAbsoluteUrls||f)&&(d=u(d)),e&&(d+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */");var g=new Blob([d],{type:"text/css"}),h=a.href;a.href=URL.createObjectURL(g),h&&URL.revokeObjectURL(h)}var o={},p=function(a){var b;return function(){return"undefined"==typeof b&&(b=a.apply(this,arguments)),b}}(function(){return window&&document&&document.all&&!window.atob}),q=function(a){var b={};return function(c){return"undefined"==typeof b[c]&&(b[c]=a.call(this,c)),b[c]}}(function(a){return document.querySelector(a)}),r=null,s=0,t=[],u=c(7);a.exports=function(a,b){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");b=b||{},b.attrs="object"==typeof b.attrs?b.attrs:{},b.singleton||(b.singleton=p()),b.insertInto||(b.insertInto="head"),b.insertAt||(b.insertAt="bottom");var c=e(a,b);return d(c,b),function(a){for(var f=[],g=0;g<c.length;g++){var h=c[g],i=o[h.id];i.refs--,f.push(i)}if(a){var k=e(a,b);d(k,b)}for(var i,g=0;g<f.length;g++)if(i=f[g],0===i.refs){for(var l=0;l<i.parts.length;l++)i.parts[l]();delete o[i.id]}}};var v=function(){var a=[];return function(b,c){return a[b]=c,a.filter(Boolean).join("\n")}}()},function(a){a.exports=function(a){var b="undefined"!=typeof window&&window.location;if(!b)throw new Error("fixUrls requires window.location");if(!a||"string"!=typeof a)return a;var c=b.protocol+"//"+b.host,d=c+b.pathname.replace(/\/[^\/]*$/,"/"),e=a.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(a,b){var e=b.trim().replace(/^"(.*)"$/,function(a,b){return b}).replace(/^'(.*)'$/,function(a,b){return b});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(e))return a;var f;return f=0===e.indexOf("//")?e:0===e.indexOf("/")?c+e:d+e.replace(/^\.\//,""),"url("+JSON.stringify(f)+")"});return e}},function(a,b,c){var d=c(9);"string"==typeof d&&(d=[[a.i,d,""]]);var e,f={};f.transform=e;c(6)(d,f);d.locals&&(a.exports=d.locals),!1},function(a,b,c){b=a.exports=c(5)(!1),b.push([a.i,"body {\n  background-color: #aaa;\n  display: table;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0; }\n\n.css-text,\n.sass-text,\n.html-text {\n  max-width: 400px;\n  min-height: 340px;\n  text-align: left;\n  overflow-x: auto; }\n\n.css,\n.scss,\n.html {\n  display: none; }\n  .css pre,\n  .scss pre,\n  .html pre {\n    display: none; }\n  .css.active,\n  .scss.active,\n  .html.active {\n    display: inline-block; }\n    .css.active pre,\n    .scss.active pre,\n    .html.active pre {\n      display: block;\n      background-color: white;\n      border-radius: 0.5em; }\n\n.col-code,\n.col-image {\n  display: inline-block;\n  vertical-align: middle;\n  min-width: 300px; }\n\n.holder {\n  margin: 0 auto; }\n\n.result {\n  text-align: center;\n  margin: 4% 0; }\n  .result li {\n    vertical-align: middle; }\n\n.row.image-generator {\n  box-sizing: border-box;\n  margin-bottom: 2%; }\n\n.form-group {\n  font-size: 1.5em;\n  margin: 2% 16.66%;\n  background-color: #bbd4d6;\n  padding: 0.5%; }\n\n.form-upload {\n  padding: 2%;\n  border: 0.2em dotted #408098; }\n  .form-upload.active {\n    border: 0.2em solid #408098; }\n  .form-upload label {\n    color: #295363; }\n    .form-upload label strong {\n      color: #408098;\n      cursor: pointer; }\n      .form-upload label strong:hover {\n        color: #295363; }\n\nbody.no-drag .box_dragndrop {\n  display: none; }\n\nbody.no-drag #submit-image,\nbody.no-drag #pic {\n  display: block;\n  margin: 0 auto;\n  font-size: 1em; }\n\nbody #submit-image,\nbody #pic {\n  display: none; }\n\n.btn.btn-dark {\n  background-color: #464444;\n  color: white;\n  font-weight: bold; }\n  .btn.btn-dark.active {\n    box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.5);\n    -webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.5); }\n",""])}],[0]);